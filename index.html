<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <!-- this line calls aframe -->
    <script src="./src/third-party/aframe.min.js"></script>
    <!-- this line calls the AR.js component to be used for aframe and finds the source of different assets like the description of 3D objects, the camera calibration-->
    <script src="./src/third-party/aframe-ar.js"></script>

    <!-- STYLES -->
    <link href="./src/assets/css/circle-menu.css" rel="stylesheet">
    <link rel="stylesheet" href="../src/assets/fonts/fontawesome6.1.1/css/all.min.css">

    <!-- COMPONENTS -->
    <script src="./src/components/enviroment.js"></script>
  </head>
  <body style="margin: 0px; overflow: hidden">

    <!-- TO DEVELOP ONLY -->
    <style> #aframeInspector #scenegraph, #aframeInspector #scenegraph .outliner { width: 330px; }</style>

    <!-- MENU -->
    <nav class="nav">
      <div class="burger">
        <div class="burger__patty"></div>
      </div>

      <ul class="nav__list">
        <li
          id="tasks"
          class="nav__item"
        >
          <span class="nav__link">
            <i class="nav__item_icon fa-solid fa-list-check fa-color-white"></i>
            <span class="nav__item_icon__status_on">ON</span>
            <!-- <span class="nav__item_icon__status_off">OFF</span> -->
          </span>
        </li>
      </ul>
    </nav>

    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
    >

      <!-- PIMENTA -->
      <a-marker
        type="barcode"
        value="0"
        id="pepper" scale="1.0000000262214361 0.9999999858212086 0.9999999997919302" rotation="91.49051699158122 -0.7630757554795878 -2.934130275484706" position="0.6715294199381249 -1.04649255300443 -6.238684762919372"
      >
        <!-- TITLE ENVIRONMENT -->
        <a-entity
          position="-2 0 -3"
          id="enviroment-component"
          geometry="primitive: plane; height: 1; width: 2" material="color: #000; shader: standard; visible: true; transparent: false; blending: normal; depthTest: true; depthWrite: true; opacity: 0.48"
          rotation="-90 0 0"
          height="0.8"
          width="5"
        >
          <a-text
            value="Plant-AR"
            color="#FFF"
            scale="1.2 1 1"
            id="enviroment-title" text="align: center; anchor: center; baseline: bottom"
          ></a-text>
          <a-text
            value="Atualizado a: 5min"
            color="#FFF"
            scale="1 1 1"
            id="enviroment-update" position="0 -0.1 0" text="align: center; anchor: center; baseline: top; width: 4"
          ></a-text>
        </a-entity>

        <!-- ENVIRONMENT WATER LEVEL -->
        <a-entity
          position="-2 0 -1.9"
          id="water-level-component"
          geometry="primitive: plane; height: 1; width: 2" material="color: #000; shader: standard; visible: true; transparent: false; blending: normal; depthTest: true; depthWrite: true; opacity: 0.48"
          rotation="-90 0 0"
          height="0.8"
          width="5"
        >
          <!-- TODO: Verificar acentuação UTF-8 -->
          <a-text
            value="Umidade do solo"
            rotation="0 0 0"
            color="#FFF"
            scale="1"
            id="water-level-title" position="0 0.2 0" text="align: center; anchor: center; baseline: bottom; side: front"
          ></a-text>

          <a-plane
            rotation="0 0 0"
            height="0.1"
            width="0.1"
            material="side: double; color: #B9D770;"
            id="water-level-status" position="-0.73 0 0.1"
          ></a-plane>

          <a-text
            value="Otimo"
            rotation="0 0 0"
            color="#FFF"
            scale="1 1 1"
            id="water-level-text-status" text="width: 4" position="-0.66 0 0"
          ></a-text>

          <a-text
            value="80%"
            rotation="0 0.1 0"
            color="#B9D770"
            scale="1 1 1"
            id="water-level-status-percentage" text="align: left; anchor: align; width: 9" position="0 -0.1 0.1"
          ></a-text>

        </a-entity>


      </a-marker>


      <a-entity camera></a-entity>
    </a-scene>

    <!-- <script>
      let list = document.getElementById('todo-list')

      list.insertAdjacentHTML(
        'beforeEnd',
        "<a-plane position=\"1.4 0.1 -2.0\" rotation=\"-90 0 0\" height=\"0.1\" width=\"0.1\" material=\"side: double; color: #c70000;\"></a-plane><a-text value=\"Regar as plantas!\" scale=\"0.3\" position=\"1.5 0.1 -2.0\" rotation=\"-90 0 0\"></a-text>"
      )
      list.insertAdjacentHTML(
        'beforeEnd',
        "<a-plane position=\"1.4 0.1 -1.7\" rotation=\"-90 0 0\" height=\"0.1\" width=\"0.1\" material=\"side: double; color: #ffa500;\"></a-plane><a-text value=\"Colher maças!\" scale=\"0.3\" position=\"1.5 0.1 -1.7\" rotation=\"-90 0 0\"></a-text>"
      )
    </script>

    <script>
      let tasks = document.getElementById('tasks')
      let tasksTitle = document.getElementById('tasks-title')
      let tasksList = document.getElementById('tasks-list')

      let status = document.querySelector('#tasks > span > span')

      tasks.addEventListener('click', (e) => {

        if (tasksTitle.object3D.visible === true) {
          console.log('[caiu no true]', )
          tasksTitle.object3D.visible = false;
          tasksList.object3D.visible = false;
          switchOFF()
        } else {
          tasksTitle.object3D.visible = true;
          tasksList.object3D.visible = true;
          console.log('[caiu no false]', )
          switchON()
        }
      })

      const switchOFF = () => {
        status.classList.remove('nav__item_icon__status_on')
        status.innerHTML = 'OFF'
        status.classList.add('nav__item_icon__status_off')
      }

      const switchON = () => {
        status.classList.remove('nav__item_icon__status_off')
        status.innerHTML = 'ON'
        status.classList.add('nav__item_icon__status_on')
      }
    </script>

    <script>
      document.querySelector('.burger').addEventListener('click', () => {
        document.querySelector('.burger').classList.toggle('burger--active')
        document.querySelector('.nav__list').classList.toggle('nav__list--active')
      }, false)
    </script> -->

    <script src="./src/third-party/a-frame/aframe-inspector.js"></script>
  </body>
</html>
